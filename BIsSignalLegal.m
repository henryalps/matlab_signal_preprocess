function isLegal = BIsSignalLegal(bp, ecg, ppg, rpos)
    isLegal = BIsSignalMostlyEffective(bp) && ...
        BIsSignalMostlyEffective(ecg) &&...
        BIsSignalMostlyEffective(ppg) &&...
        BIsEcgPosLegal(rpos);
end

function isLegal = BIsSignalMostlyEffective(sig)
    THEROLD = 0.5;
    isLegal = true;
    %% ???????????????NaN?????????
    sig = BRemoveNan(sig);
    %% ????????????????????????
    d1 = (length(diff(sig)~=0)) ;
    %% ??????????????????????????????????????????????????????????????????????????????
    if d1/length(sig) < THEROLD
        isLegal = false;
        return
    end
end

function isLegal = BIsBPPosLegal(bppos)
    config = BReadConfig();
    isLegal = length(bppos) > config.timelength;
end

function isLegal = BIsEcgPosLegal(rpos)
    isLegal = BIsBPPosLegal(rpos);
end